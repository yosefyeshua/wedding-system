<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>× ×™×”×•×œ ×¡×¤×§×™×</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Navigation Menu -->
        <nav style="background: rgba(255,255,255,0.95); padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
            <a href="/" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; transition: all 0.3s;">ğŸ  ×“×£ ×”×‘×™×ª</a>
            <span style="color: #ccc;">|</span>
            <a href="/tasks" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; transition: all 0.3s;">ğŸ“‹ ××©×™××•×ª</a>
            <span style="color: #ccc;">|</span>
            <a href="/budget" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; transition: all 0.3s;">ğŸ’° ×”×•×¦××•×ª</a>
            <span style="color: #ccc;">|</span>
            <a href="/suppliers" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; font-weight: bold; transition: all 0.3s;">ğŸ¢ ×¡×¤×§×™×</a>
            <span style="color: #ccc;">|</span>
            <a href="/events" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; transition: all 0.3s;">ğŸ“… ××™×¨×•×¢×™×</a>
            <span style="color: #ccc;">|</span>
            <a href="/settings" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #667eea; transition: all 0.3s;">âš™ï¸ ×”×’×“×¨×•×ª</a>
            <span style="color: #ccc;">|</span>
            <a href="/logout" style="margin: 0 15px; font-size: 1.1rem; text-decoration: none; color: #e74c3c; transition: all 0.3s;">ğŸšª ×™×¦×™××”</a>
        </nav>

        <!-- Daily Tip -->
        {% if daily_tip %}
        <div class="daily-tip">
            <div class="tip-header">ğŸ’¡ ×˜×™×¤ ×”×™×•× - {{ daily_tip.category }}</div>
            <div class="tip-content">{{ daily_tip.tip }}</div>
        </div>
        {% endif %}

        <h1>ğŸ¢ × ×™×”×•×œ ×¡×¤×§×™×</h1>
        
        <!-- Flash Messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                {% for category, message in messages %}
                    <div class="alert alert-{{ category }}">{{ message }}</div>
                {% endfor %}
            {% endif %}
        {% endwith %}

        <h2>×”×•×¡×¤×ª ×¡×¤×§ ×—×“×©</h2>
        <form action="/suppliers/add" method="post">
            <input type="text" name="name" placeholder="×©× ×”×¡×¤×§ (×œ×“×•×’××”: ××•×œ× ××™×¨×•×¢×™× ×¨×•×™××œ)" required>
            <input type="text" name="phone" placeholder="×˜×œ×¤×•×Ÿ (×œ×“×•×’××”: 050-1234567)">
            
            <select name="category" id="categorySelect" onchange="toggleCustomCategory()" style="margin-top: 10px;">
                <option value="">×‘×—×¨ ×§×˜×’×•×¨×™×”</option>
                <option value="××•×œ×">××•×œ×</option>
                <option value="×¦×œ×">×¦×œ×</option>
                <option value="DJ">DJ</option>
                <option value="×§×™×™×˜×¨×™× ×’">×§×™×™×˜×¨×™× ×’</option>
                <option value="×¤×¨×—×™×">×¤×¨×—×™×</option>
                <option value="×”×¡×¢×•×ª">×”×¡×¢×•×ª</option>
                <option value="custom">â• ××—×¨ (×§×˜×’×•×¨×™×” ×—×“×©×”)</option>
            </select>

            <input type="text" name="custom_category" id="customCategory" placeholder="×”×§×œ×“ ×§×˜×’×•×¨×™×” ×—×“×©×”" style="display: none; margin-top: 10px;">

            <script>
            function toggleCustomCategory() {
                const select = document.getElementById('categorySelect');
                const customInput = document.getElementById('customCategory');
                
                if (select.value === 'custom') {
                    customInput.style.display = 'block';
                    customInput.required = true;
                    select.removeAttribute('required');
                } else {
                    customInput.style.display = 'none';
                    customInput.required = false;
                    select.required = true;
                }
            }
            </script>
            
            <input type="number" step="0.01" name="price" placeholder="××—×™×¨ ××©×•×¢×¨ ×‘×©×§×œ×™×" style="margin-top: 10px;">
            <button type="submit">â• ×”×•×¡×£ ×¡×¤×§</button>
        </form>

        <hr>

        <h2>×¡×™× ×•×Ÿ ×¡×¤×§×™× ×œ×¤×™ ×§×˜×’×•×¨×™×”</h2>
        <div style="text-align: center; margin: 20px 0;">
            <a href="/suppliers" style="display: inline-block; margin: 0 10px; padding: 10px 20px; background: rgba(255,255,255,0.95); border-radius: 8px; text-decoration: none; color: #667eea; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">ğŸ“‹ ×”×›×œ</a>
            
            {% for category, count in category_counts.items() %}
            <a href="/suppliers?category={{ category }}" style="display: inline-block; margin: 0 10px; padding: 10px 20px; background: rgba(255,255,255,0.95); border-radius: 8px; text-decoration: none; color: #667eea; font-weight: bold; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                {% if category == '××•×œ×' %}ğŸ›ï¸
                {% elif category == '×¦×œ×' %}ğŸ“·
                {% elif category == 'DJ' %}ğŸµ
                {% elif category == '×§×™×™×˜×¨×™× ×’' %}ğŸ½ï¸
                {% elif category == '×¤×¨×—×™×' %}ğŸ’
                {% elif category == '×”×¡×¢×•×ª' %}ğŸš—
                {% elif category == '××—×¨' %}ğŸ“¦
                {% elif category == '×¨×‘' %}ğŸ‘¨â€âš–ï¸
                {% elif category == '××¢×¦×‘ ×©×™×¢×¨' %}ğŸ’‡
                {% elif category == '××™×¤×•×¨' %}ğŸ’„
                {% elif category == '×©××œ×”' %}ğŸ‘—
                {% elif category == '×—×œ×™×¤×”' %}ğŸ¤µ
                {% else %}âœ¨
                {% endif %}
                {{ category }} ({{ count }})
            </a>
            {% endfor %}
        </div>

        <hr>

        <h2>ğŸ“Š ×¨×©×™××ª ×¡×¤×§×™×</h2>
        <p>ğŸ’µ ×¡×”×´×› ×¢×œ×•×ª ×¡×¤×§×™×: <strong>{{ total }} â‚ª</strong></p>

        <h3>ğŸ“ ×¡×¤×§×™× ×¨×©×•××™×:</h3>
        {% if suppliers %}
        <table>
            <thead>
                <tr>
                    <th>×©× ×”×¡×¤×§</th>
                    <th>×˜×œ×¤×•×Ÿ</th>
                    <th>×§×˜×’×•×¨×™×”</th>
                    <th>××—×™×¨</th>
                    <th>×“×™×¨×•×’</th>
                    <th>×¢×¨×™×›×”</th>
                    <th>××—×™×§×”</th>
                </tr>
            </thead>
            <tbody>
                {% for s in suppliers %}
                <tr>
                    <td><strong>{{ s.name }}</strong></td>
                    <td>{{ s.phone }}</td>
                    <td><span style="background: #667eea; color: white; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem;">{{ s.category }}</span></td>
                    <td style="color: #667eea; font-weight: 700;">{{ s.price }} â‚ª</td>
                    <td>
                        <form action="/suppliers/rate/{{ s.id }}" method="post" style="display: inline;">
                            <input type="hidden" name="rating" value="1">
                            <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.3rem;">
                                {% if s.rating >= 1 %}â­{% else %}â˜†{% endif %}
                            </button>
                        </form>
                        <form action="/suppliers/rate/{{ s.id }}" method="post" style="display: inline;">
                            <input type="hidden" name="rating" value="2">
                            <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.3rem;">
                                {% if s.rating >= 2 %}â­{% else %}â˜†{% endif %}
                            </button>
                        </form>
                        <form action="/suppliers/rate/{{ s.id }}" method="post" style="display: inline;">
                            <input type="hidden" name="rating" value="3">
                            <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.3rem;">
                                {% if s.rating >= 3 %}â­{% else %}â˜†{% endif %}
                            </button>
                        </form>
                        <form action="/suppliers/rate/{{ s.id }}" method="post" style="display: inline;">
                            <input type="hidden" name="rating" value="4">
                            <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.3rem;">
                                {% if s.rating >= 4 %}â­{% else %}â˜†{% endif %}
                            </button>
                        </form>
                        <form action="/suppliers/rate/{{ s.id }}" method="post" style="display: inline;">
                            <input type="hidden" name="rating" value="5">
                            <button type="submit" style="background: none; border: none; cursor: pointer; font-size: 1.3rem;">
                                {% if s.rating >= 5 %}â­{% else %}â˜†{% endif %}
                            </button>
                        </form>
                    </td>
                    <td>
                        <a href="/suppliers/edit/{{ s.id }}" style="background: #667eea; padding: 8px 16px; border-radius: 8px; text-decoration: none; color: white; display: inline-block;">âœï¸ ×¢×¨×•×š</a>
                    </td>
                    <td>
                        <form action="/suppliers/delete/{{ s.id }}" method="post" style="display: inline;">
                            <button type="submit" onclick="return confirm('×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ××—×•×§ ××ª {{ s.name }}?')" style="background: #f093fb; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 1rem; color: white;">ğŸ—‘ï¸ ××—×§</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
        {% else %}
        <div class="empty-message">
            <p>ğŸ“­ ××™×Ÿ ×¡×¤×§×™× ×¨×©×•××™× ×¢×“×™×™×Ÿ. ×”×•×¡×£ ×¡×¤×§ ×¨××©×•×Ÿ!</p>
        </div>
        {% endif %}
    </div>
</body>
</html>